(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{106:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(40),o=n.n(c),s=(n(106),n(6)),u=n(5),i=n(2),l=n(89).create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"c3902200-a6e9-4f88-83b9-6487092494bd"}}),j=function(e){return l.get("auth/me",{user:e}).then((function(e){return e.data}))},b=function(e){return l.post("auth/login",e).then((function(e){return e.data}))},h=function(){return l.delete("auth/login").then((function(e){return e.data}))},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l.get("users?count=".concat(e,"&page=").concat(t)).then((function(e){return e.data}))},f=function(e){return l.post("follow/".concat(e)).then((function(e){return e.data}))},p=function(e){return l.delete("follow/".concat(e)).then((function(e){return e.data}))},g=function(){return l.get("security/get-captcha-url").then((function(e){return e.data}))},O=function(e){return l.get("profile/".concat(e)).then((function(e){return e.data}))},m=function(e){return l.put("profile",e).then((function(e){return e.data}))},A=function(e){return l.get("profile/status/".concat(e)).then((function(e){return e}))},x=function(e){return l.put("profile/status",{status:e}).then((function(e){return e.data}))},v=function(e){var t=new FormData;return t.append("image",e),l.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},k="SET_USER_DATA",C="CLEAR_USER_DATA",F="LOGIN_USER",w="ADD_ERROR_MESSAGE",P="SET_CAPTCHA",N="TOOGLE_IS_FETCHING",E="SET_REDIRECT",y="CLEAR_ERROR_MESSAGE",D={isAuth:!1,user:null,errorMessage:null,captchaUrl:null,isFetching:!0,redirect:!1},R=function(e){return{type:w,errorMessage:e}},M=function(){return{type:y}},I=function(e){return{type:N,isFetching:e}},S=function(e){return{type:E,redirect:e}},_=function(){return function(e){I(!0),j().then((function(t){0===t.resultCode&&e(function(e){return{type:k,data:e}}(t.data)),e(I(!1))}),(function(e){return alert("Rejected: "+e.message)}))}},T=function(){return function(e){h().then((function(){e({type:C})}),(function(e){return alert("Rejected: "+e.message)}))}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(i.a)(Object(i.a)({},e),{},{isAuth:!0,user:t.data});case F:return Object(i.a)(Object(i.a)({},e),{},{isAuth:!0});case C:return Object(i.a)(Object(i.a)({},e),{},{isAuth:!1,user:null});case w:return Object(i.a)(Object(i.a)({},e),{},{errorMessage:t.errorMessage});case y:return Object(i.a)(Object(i.a)({},e),{},{errorMessage:null});case P:return Object(i.a)(Object(i.a)({},e),{},{captchaUrl:t.captchaUrl});case N:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case E:return Object(i.a)(Object(i.a)({},e),{},{redirect:t.redirect});default:return e}},H=n(8),Q=n(1),J={logout:T},B=Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}),J)((function(e){var t=e.isAuth,n=e.location;return t?Object(Q.jsx)("header",{className:"header",children:Object(Q.jsxs)("div",{className:"header__container container",children:["/"===n.pathname?Object(Q.jsx)("div",{className:"header__logo header__logo--no-hover",children:"Social Network"}):Object(Q.jsx)(H.c,{className:"header__logo",to:"/",children:"Social Network"}),"/settings"===n.pathname?Object(Q.jsx)("div",{className:"header__links",children:Object(Q.jsx)(H.c,{className:"header__link",to:"/",children:"--\x3e Users"})}):Object(Q.jsx)("div",{className:"header__links",children:Object(Q.jsx)(H.c,{className:"header__link",to:"/settings",children:"Settings"})})]})}):Object(Q.jsx)("header",{className:"header",children:Object(Q.jsxs)("div",{className:"header__container container",children:[Object(Q.jsx)(H.c,{className:"header__logo",to:"/",children:"Social Network"}),Object(Q.jsx)("div",{className:"header__links",children:Object(Q.jsx)(H.c,{className:"header__link",to:"/signin",children:"Sign In"})})]})})})),L=n(46),Y=n(9),z=n(45),K=n.n(z),W=function(e){return Object(Q.jsx)("button",{onClick:e.onClick,className:K()(e.className,"button","red"===e.color?"button--red":null,"green"===e.color?"button--green":null),type:e.button?"button":"submit",children:e.text})},X=function(e){return Object(Q.jsxs)("div",{className:K()("field",{"field--checkbox":"checkbox"===e.type}),children:[Object(Q.jsx)("label",{htmlFor:e.id,children:e.labelText}),Object(Q.jsx)("input",{id:e.id,name:e.name,type:e.type,onChange:e.onChange,value:e.value?e.value:null,placeholder:e.placeholder?e.placeholder:null,checked:e.checked,autoFocus:e.autoFocus})]})},q=function(e){return Object(Q.jsxs)("div",{className:"captcha",children:[Object(Q.jsx)("img",{src:e.image,alt:"captcha"}),Object(Q.jsx)(X,{labelText:"Enter captcha",id:"captcha",name:"captcha",type:"text",onChange:e.onChange,value:e.value})]})},G=Y.b().shape({email:Y.c().required("Required"),password:Y.c().required("Required")}),V={login:function(e){return function(t){I(!0),b(e).then((function(e){0===e.resultCode?(t({type:F}),t(_())):1===e.resultCode?t(R(e.messages[0])):10===e.resultCode&&g().then((function(e){var n;t((n=e.url,{type:P,captchaUrl:n}))}),(function(e){return alert("Rejected: "+e.message)})),t(I(!1))}),(function(e){return alert("Rejected: "+e.message)}))}}},Z=Object(u.b)((function(e){return{isAuth:e.auth.isAuth,errorMessage:e.auth.errorMessage,captchaUrl:e.auth.captchaUrl}}),V)((function(e){var t=Object(L.a)({initialValues:{email:"",password:"",rememberMe:!1,captcha:null},validationSchema:G,validateOnChange:!1,onSubmit:function(t){e.login(t)}});return e.isAuth?Object(Q.jsx)(s.a,{to:"/"}):Object(Q.jsxs)("form",{className:"form",onSubmit:t.handleSubmit,children:[Object(Q.jsx)(X,{labelText:"Email",id:"email",name:"email",type:"text",onChange:t.handleChange,value:t.values.email}),Object(Q.jsx)(X,{labelText:"Password",id:"password",name:"password",type:"password",onChange:t.handleChange,value:t.values.password}),Object(Q.jsx)(X,{labelText:"Remember Me",id:"rememberMe",name:"rememberMe",type:"checkbox",onChange:t.handleChange,value:t.values.rememberMe}),Object(Q.jsx)(W,{buttonClass:"form__button",text:"Submit"}),e.captchaUrl?Object(Q.jsx)(q,{image:e.captchaUrl,onChange:t.handleChange,value:t.values.captcha}):null,Object.keys(t.errors).length>0?Object(Q.jsx)("div",{className:"error",children:"Fill in All the Fields"}):null,e.errorMessage?Object(Q.jsx)("div",{className:"error",children:e.errorMessage}):null]})})),$="SET_PROFILE",ee="CLEAR_PROFILE",te="SET_PROFILE_PHOTO",ne="SET_STATUS",re={profileData:null,status:""},ae=function(e){return{type:$,data:e}},ce=function(){return{type:ee}},oe=function(e){return{type:ne,status:e}},se=function(e){return function(t){I(!0),O(e).then((function(e){t(ae(e))}),(function(e){return alert("Rejected: "+e.message)})),I(!1)}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(i.a)(Object(i.a)({},e),{},{profileData:t.data});case ee:return Object(i.a)(Object(i.a)({},e),{},{profileData:null});case te:return Object(i.a)(Object(i.a)({},e),{},{profileData:Object(i.a)(Object(i.a)({},e.profileData),{},{photos:t.photo})});case ne:return Object(i.a)(Object(i.a)({},e),{},{status:t.status});default:return e}},ie=n.p+"static/media/preloader.8a9edbd3.svg",le=function(){return Object(Q.jsx)("div",{className:"preloader",children:Object(Q.jsx)("img",{src:ie,alt:"preloader"})})},je=n.p+"static/media/user.5cfa6a8b.jpg",be=n(58),he=n.n(be),de=n(96),fe=n(100),pe=function(e){var t=e.updateProfilePhoto,n=Object(r.useCallback)((function(e){t(e[0])}),[]),a=Object(fe.a)({onDrop:n,noDrag:!0,multiple:!1,accept:"image/jpeg, image/png",getFilesFromEvent:function(e){return function(e){return s.apply(this,arguments)}(e)}}),c=a.getRootProps,o=a.getInputProps;function s(){return(s=Object(de.a)(he.a.mark((function e(t){var n,r,a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=t.dataTransfer?t.dataTransfer.files:t.target.files,a=0;a<r.length;a++)n.push(r.item(a));return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(Q.jsx)("section",{className:"photo-upload",children:Object(Q.jsxs)("div",Object(i.a)(Object(i.a)({},c({className:"photo-upload__dropzone dropzone"})),{},{children:[Object(Q.jsx)("input",Object(i.a)({},o())),Object(Q.jsx)("p",{className:"photo-upload__text",children:"Change your Photo"})]}))})},ge=n(23),Oe=function(e){var t=e.statusTitle,n=Object(r.useState)(!1),a=Object(ge.a)(n,2),c=a[0],o=a[1],s=Object(u.c)(),i=Object(u.d)((function(e){return e.profile.status})),l=Object(u.d)((function(e){return e.profile.profileData.userId})),j=Object(r.useState)(i),b=Object(ge.a)(j,2),h=b[0],d=b[1];Object(r.useEffect)((function(){s(function(e){return function(t){I(!0),A(e).then((function(e){200===e.status?t(oe(e.data)):t(R("error: "+e.status))}),(function(e){return alert("Rejected: "+e.message)})),I(!1)}}(l)),d(i)}),[i]);var f=function(e){s(function(e){return function(t){I(!0),x(e).then((function(n){0===n.resultCode?t(oe(e)):1===n.resultCode&&t(R(n.messages))}),(function(e){return alert("Rejected: "+e.message)})),I(!1)}}(e)),o(!1)};return Object(Q.jsx)("div",{className:"status",children:c?Object(Q.jsxs)("div",{children:[Object(Q.jsx)(X,{id:"status",name:"status",autoFocus:!0,type:"text",value:h,onChange:function(e){return function(e){e.stopPropagation(),d(e.currentTarget.value)}(e)}}),Object(Q.jsxs)("div",{className:"status__buttons",children:[Object(Q.jsx)(W,{className:"status__button",color:"green",text:"Save",type:"button",onClick:function(){return f(h)}}),Object(Q.jsx)(W,{className:"status__button",color:"red",text:"Cancel",type:"button",onClick:function(){return o(!1),void d(i)}})]})]}):Object(Q.jsx)("p",{onClick:function(){return o(!0)},className:"status__title",children:i||t})})},me=function(e){var t=e.profile,n=e.userId,r=e.updateProfilePhoto,a=e.location,c=function(e){return e.replace("https://","").replace("http://","")};return Object(Q.jsxs)("div",{className:"profile",children:[Object(Q.jsxs)("div",{className:"profile__uploader",children:[n===t.userId&&"/settings"===a&&Object(Q.jsx)(pe,{updateProfilePhoto:r}),Object(Q.jsx)("img",{className:"profile__img",src:t.photos.large?t.photos.large:je,alt:""})]}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("p",{className:"profile__name",children:t.fullName}),n===t.userId&&"/settings"===a&&Object(Q.jsx)(Oe,{statusTitle:"Click to change status"}),Object(Q.jsx)("hr",{}),Object(Q.jsxs)("p",{children:["User ID: ",t.userId]}),t.aboutMe?Object(Q.jsxs)("p",{children:["About me: ",t.aboutMe]}):null,t.contacts.facebook?Object(Q.jsxs)("p",{children:["Facebook: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.facebook),target:"_blank",rel:"nofollow noopener",children:t.contacts.facebook})]}):null,t.contacts.website?Object(Q.jsxs)("p",{children:["Website: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.website),target:"_blank",rel:"nofollow noopener",children:t.contacts.website})]}):null,t.contacts.vk?Object(Q.jsxs)("p",{children:["Vk: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.vk),target:"_blank",rel:"nofollow noopener",children:t.contacts.vk})]}):null,t.contacts.twitter?Object(Q.jsxs)("p",{children:["Twitter: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.twitter),target:"_blank",rel:"nofollow noopener",children:t.contacts.twitter})]}):null,t.contacts.instagram?Object(Q.jsxs)("p",{children:["Instagram: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.instagram),target:"_blank",rel:"nofollow noopener",children:t.contacts.instagram})]}):null,t.contacts.youtube?Object(Q.jsxs)("p",{children:["Youtube: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.youtube),target:"_blank",rel:"nofollow noopener",children:t.contacts.youtube})]}):null,t.contacts.github?Object(Q.jsxs)("p",{children:["Github: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.github),target:"_blank",rel:"nofollow noopener",children:t.contacts.github})]}):null,t.contacts.mainLink?Object(Q.jsxs)("p",{children:["Main link: ",Object(Q.jsx)("a",{href:"https://"+c(t.contacts.mainLink),target:"_blank",rel:"nofollow noopener",children:t.contacts.mainLink})]}):null,Object(Q.jsxs)("p",{children:["Looking for a job: ",t.lookingForAJob?"Yes":"No"]}),t.lookingForAJobDescription?Object(Q.jsxs)("p",{children:["Looking for a job description: ",t.lookingForAJobDescription]}):null]})]})},Ae=function(e){return function(t){var n=Object(u.d)((function(e){return e.auth.isAuth})),r=Object(u.d)((function(e){return e.auth.isFetching}));return n||r?Object(Q.jsx)(e,Object(i.a)({},t)):Object(Q.jsx)(s.a,{to:"/signin"})}},xe=n(18),ve={getProfile:se,clearProfile:ce,logout:T,updateProfilePhoto:function(e){return function(t){I(!0),v(e).then((function(e){var n;0===e.resultCode?t((n=e.data.photos,{type:te,photo:n})):1===e.resultCode&&t(R(e.messages))}),(function(e){return alert("Rejected: "+e.message)})),I(!1)}},clearErrorMessage:M},ke=Object(xe.c)(Object(u.b)((function(e){return{user:e.auth.user,isFetching:e.auth.isFetching,profile:e.profile.profileData,errorMessage:e.auth.errorMessage}}),ve),Ae)((function(e){return Object(r.useEffect)((function(){return e.isFetching||e.getProfile(e.user.id),function(){return e.clearProfile()}}),[e.isFetching]),Object(r.useEffect)((function(){return function(){return e.clearErrorMessage()}}),[e.clearErrorMessage]),e.profile&&!e.isFetching?Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)("div",{className:"settings",children:[Object(Q.jsx)(me,{profile:e.profile,user:e.user,userId:e.user.id,updateProfilePhoto:e.updateProfilePhoto,location:e.location.pathname}),Object(Q.jsxs)("div",{className:"settings__buttons-block",children:[Object(Q.jsx)(H.b,{className:"settings__button button button--green",to:"/edit-profile",children:"Edit profile"}),Object(Q.jsx)(W,{className:"settings__button",type:"button",onClick:e.logout,text:"Log out",color:"red"})]}),e.errorMessage?Object(Q.jsx)("div",{className:"error",children:e.errorMessage}):null]})}):Object(Q.jsx)(le,{})})),Ce="SET_USERS",Fe="SET_TOTAL_COUNT",we="SET_CURRENT_PAGE",Pe="FOLLOW",Ne="UNFOLLOW",Ee={usersArr:[],currentPage:null,totalCount:null,pageSize:10},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ce:return Object(i.a)(Object(i.a)({},e),{},{usersArr:t.users});case Fe:return Object(i.a)(Object(i.a)({},e),{},{totalCount:t.totalCount});case we:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case Pe:return Object(i.a)(Object(i.a)({},e),{},{usersArr:e.usersArr.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!0}):e}))});case Ne:return Object(i.a)(Object(i.a)({},e),{},{usersArr:e.usersArr.map((function(e){return e.id===t.userId?Object(i.a)(Object(i.a)({},e),{},{followed:!1}):e}))});default:return e}},De=function(e){var t=e.user.photos.small;return Object(Q.jsxs)("div",{className:"user",children:[Object(Q.jsx)("div",{className:"user__img-block",children:Object(Q.jsx)(H.b,{to:"/profile/".concat(e.user.id),children:Object(Q.jsx)("img",{className:"user__img",src:t||"data:image/jpeg;base64,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",alt:""})})}),Object(Q.jsxs)("div",{className:"user__info",children:[Object(Q.jsx)(H.b,{className:"user__link",to:"/profile/".concat(e.user.id),children:Object(Q.jsx)("p",{className:"user__name",children:e.user.name})}),Object(Q.jsxs)("p",{className:"user__id",children:["User ID: ",e.user.id]}),Object(Q.jsxs)("p",{className:"user__status",children:["Status: ",e.user.status]}),e.user.followed?Object(Q.jsx)(W,{color:"red",type:"button",onClick:function(){return e.unfollow(e.user.id)},text:"Unfollow"}):Object(Q.jsx)(W,{color:"green",type:"button",onClick:function(){return e.follow(e.user.id)},text:"Follow"})]})]})},Re=n(98),Me=n.n(Re),Ie={getUsers:function(e,t){return function(n){d(e,t).then((function(e){var t,r;n((t=e.totalCount,{type:Fe,totalCount:t})),n((r=e.items,{type:Ce,users:r}))}),(function(e){return alert("Rejected: "+e.message)}))}},setCurrentPage:function(e){return{type:we,currentPage:e}},follow:function(e){return function(t){f(e).then((function(){t(function(e){return{type:Pe,userId:e}}(e))}),(function(e){return alert("Rejected: "+e.message)}))}},unfollow:function(e){return function(t){p(e).then((function(){t(function(e){return{type:Ne,userId:e}}(e))}),(function(e){return alert("Rejected: "+e.message)}))}}},Se=Object(u.b)((function(e){return{currentPage:e.users.currentPage,totalCount:e.users.totalCount,pageSize:e.users.pageSize,usersArr:e.users.usersArr,userId:e.auth.user,isFetching:e.auth.isFetching}}),Ie)((function(e){Object(r.useEffect)((function(){return e.match.params.num?e.getUsers(e.pageSize,e.match.params.num):e.getUsers(e.pageSize,e.currentPage),e.setCurrentPage(null)}),[e.pageSize,e.currentPage]);var t=Object(s.g)(),n=Math.ceil(e.totalCount/e.pageSize);return Object(Q.jsxs)(Q.Fragment,{children:[e.isFetching?Object(Q.jsx)(le,{}):null,Object(Q.jsx)(Me.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:n,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(n){var r=n.selected+1;if(0===n.selected)return e.setCurrentPage(r),t.push("/");e.setCurrentPage(r),t.push("/page/".concat(r))},containerClassName:"pagination",activeClassName:"active",hrefBuilder:function(e){return"/page/".concat(e)},forcePage:e.match.params.num?Number(e.match.params.num)-1:0}),e.usersArr.map((function(t){return Object(Q.jsx)(De,{user:t,follow:e.follow,unfollow:e.unfollow,userId:e.userId},t.id)}))]})})),_e={getProfile:se,clearProfile:ce},Te=Object(u.b)((function(e){return{isFetching:e.auth.isFetching,profile:e.profile.profileData,user:e.auth.user}}),_e)((function(e){return Object(r.useEffect)((function(){return!e.isFetching&&e.match.params.userId&&e.getProfile(e.match.params.userId),function(){return e.clearProfile()}}),[e.isFetching]),e.profile&&!e.isFetching?Object(Q.jsx)(me,{profile:e.profile,isFetching:e.isFetching,userId:e.user.id,location:e.history.location.pathname}):Object(Q.jsx)(le,{})})),Ue=n(101),He=Y.b().shape({aboutMe:Y.c().required("Required"),facebook:Y.c().url(),website:Y.c().url(),vk:Y.c().url(),twitter:Y.c().url(),instagram:Y.c().url(),youtube:Y.c().url(),github:Y.c().url(),mainLink:Y.c().url(),lookingForAJob:Y.a(),lookingForAJobDescription:Y.c().required("Required")}),Qe={updateProfile:function(e){return function(t){I(!0),m(e).then((function(n){0===n.resultCode?(t(ae(e)),t(S(!0))):1===n.resultCode&&t(R(n.messages))}),(function(e){return alert("Rejected: "+e.message)})),I(!1)}},setRedirect:S,clearErrorMessage:M},Je=Object(u.b)((function(e){return{user:e.auth.user,errorMessage:e.auth.errorMessage,redirect:e.auth.redirect}}),Qe)((function(e){var t=e.profile,n=e.user,a=Object(Ue.a)(e,["profile","user"]),c=Object(s.g)();Object(r.useEffect)((function(){return function(){return a.clearErrorMessage()}}),[a.clearErrorMessage]);var o=Object(L.a)({initialValues:{aboutMe:t.aboutMe,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink},lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,fullName:n.login,userId:n.id,photos:{small:t.photos.small,large:t.photos.large}},validationSchema:He,validateOnChange:!1,onSubmit:function(e){a.updateProfile(e)}});return a.redirect&&(c.push("/settings"),a.setRedirect(!1)),Object(Q.jsxs)("form",{className:"form",onSubmit:o.handleSubmit,children:[Object(Q.jsx)(X,{labelText:"About me",id:"aboutMe",name:"aboutMe",type:"text",onChange:o.handleChange,value:o.values.aboutMe}),Object.keys(o.values.contacts).map((function(e){return Object(Q.jsx)(X,{labelText:e,id:e,name:"contacts."+e,type:"text",onChange:o.handleChange,value:o.values.contacts[e]},e)})),Object(Q.jsx)(X,{labelText:"looking for a job",id:"lookingForAJob",name:"lookingForAJob",type:"checkbox",onChange:o.handleChange,value:o.values.lookingForAJob,checked:o.values.lookingForAJob}),Object(Q.jsx)(X,{labelText:"looking for a job description",id:"lookingForAJobDescription",name:"lookingForAJobDescription",type:"text",onChange:o.handleChange,value:o.values.lookingForAJobDescription}),Object(Q.jsx)(W,{buttonClass:"form__button",text:"Submit"}),Object.keys(o.errors).length>0?Object(Q.jsx)("div",{className:"error",children:"Error"}):null,a.errorMessage?Object(Q.jsx)("div",{className:"error",children:a.errorMessage}):null]})})),Be={getProfile:se},Le=Object(xe.c)(Object(u.b)((function(e){return{user:e.auth.user,profile:e.profile.profileData,isFetching:e.auth.isFetching}}),Be),Ae)((function(e){return Object(r.useEffect)((function(){e.isFetching||e.getProfile(e.user.id)}),[e.isFetching]),e.profile&&e.user?Object(Q.jsx)(Je,{profile:e.profile}):Object(Q.jsx)(le,{})}));var Ye={auth:_},ze=Object(u.b)((function(e){return{isAuth:e.auth.isAuth}}),Ye)((function(e){var t=e.isAuth,n=e.auth,a=Object(s.h)();return Object(r.useEffect)((function(){t||n()}),[t]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(B,{location:a}),Object(Q.jsx)("div",{className:"container container--small",children:Object(Q.jsxs)(s.d,{children:[Object(Q.jsx)(s.b,{path:"/signin",component:Z}),Object(Q.jsx)(s.b,{path:"/settings",component:ke,location:a}),Object(Q.jsx)(s.b,{path:"/page/:num",component:Se}),Object(Q.jsx)(s.b,{path:"/profile/:userId",component:Te}),Object(Q.jsx)(s.b,{path:"/edit-profile",component:Le}),Object(Q.jsx)(s.b,{exact:!0,path:"/",component:Se})]})})]})})),Ke=n(99),We=Object(xe.b)({auth:U,users:ye,profile:ue}),Xe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xe.c,qe=Object(xe.d)(We,Xe(Object(xe.a)(Ke.a))),Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,230)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(u.a,{store:qe,children:Object(Q.jsx)(H.a,{children:Object(Q.jsx)(ze,{})})})}),document.getElementById("root")),Ge()}},[[229,1,2]]]);
//# sourceMappingURL=main.1ef98245.chunk.js.map